#!/bin/bash
while true
do
    if pgrep -x "main" > /dev/null
    then
        echo "Running..."
    else
        echo "Stopped, restart now"
        # Use nohup and & if the app has to run continuously
        # Replace /path/to/your_program with the exact path of your program
        nohup /home/ubuntu/main > /dev/null &
    fi
    # wait for 120s before the next check
    sleep 180
done
